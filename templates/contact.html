{% extends './base.html' %}

{% block title %}Contact Us - EventVenue{% endblock %}

{% block meta_description %}Get in touch with EventVenue for venue inquiries, support, or partnership opportunities. We're here to help make your event planning seamless.{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero">
    <h1>Get In Touch</h1>
    <p>We're here to help make your event planning seamless and stress-free</p>
</div>

<!-- Contact Content Grid -->
<div class="venue-content-grid">
    <div class="venue-main-content">
        <!-- Contact Form -->
        <div class="detail-card">
            <h2 class="card-title">
                <i class="fas fa-envelope"></i>
                Send Us a Message
            </h2>
            
            <form class="contact-form" method="POST" id="contactForm">
                {% csrf_token %}
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" required placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required placeholder="Enter your email address">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="inquiry_type">Inquiry Type</label>
                        <select id="inquiry_type" name="inquiry_type">
                            <option value="general">General Inquiry</option>
                            <option value="booking">Booking Support</option>
                            <option value="venue_owner">Venue Owner</option>
                            <option value="partnership">Partnership</option>
                            <option value="technical">Technical Issue</option>
                            <option value="feedback">Feedback</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject *</label>
                        <input type="text" id="subject" name="subject" required placeholder="Brief subject of your message">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="message">Message *</label>
                    <textarea id="message" name="message" rows="6" required placeholder="Tell us how we can help you..."></textarea>
                </div>
                
                <button type="submit" class="contact-submit-btn" id="submitBtn">
                    <i class="fas fa-paper-plane"></i>
                    <span>Send Message</span>
                    <div class="loading-spinner" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Contact Sidebar -->
    <div class="venue-sidebar">
        <!-- Contact Info -->
        <div class="booking-card">
            <h3 class="booking-card-title">Contact Information</h3>
            
            <div class="contact-methods">
                <div class="contact-method">
                    <div class="method-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="method-info">
                        <h5>Phone Support</h5>
                        <p>+1 (555) 123-4567</p>
                        <span>Mon-Fri: 9AM-6PM PST</span>
                    </div>
                </div>
                
                <div class="contact-method">
                    <div class="method-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="method-info">
                        <h5>Email Support</h5>
                        <p>support@eventvenue.com</p>
                        <span>Response within 2 hours</span>
                    </div>
                </div>
                
                <div class="contact-method">
                    <div class="method-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="method-info">
                        <h5>Live Chat</h5>
                        <p>Available 24/7</p>
                        <span>Instant responses</span>
                    </div>
                </div>
            </div>
        </div>

        {% comment %} <!-- Office Locations -->
        <div class="detail-card">
            <h3 class="card-title">
                <i class="fas fa-map-marker-alt"></i>
                Our Offices
            </h3>
            
            <div class="office-locations">
                <div class="office-item">
                    <h5>Headquarters</h5>
                    <p>123 Event Street<br>San Francisco, CA 94102<br>United States</p>
                </div>
                
                <div class="office-item">
                    <h5>East Coast Office</h5>
                    <p>456 Venue Avenue<br>New York, NY 10001<br>United States</p>
                </div>
            </div>
        </div> {% endcomment %}
    </div>
</div>

<!-- Action Buttons -->
<div class="action-buttons">
    <a href="{% url 'about' %}" class="back-btn">
        <i class="fas fa-info-circle"></i>
        About Us
    </a>
    {% if user.is_authenticated %}
    <a href="{% url 'venue:list' %}" class="share-btn">
        <i class="fas fa-building"></i>
        Browse Venues
    </a>
    {% else %} 
    <a href="{% url 'accounts:login' %}" class="share-btn">
        <i class="fas fa-sign-in-alt"></i>
         Browse Venues
    </a>
    {% endif %}
</div>

<style>
/* Contact Page Specific Styles */
.contact-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label {
    font-weight: 600;
    color: var(--gray-700);
    font-size: 0.9rem;
}

.form-group input,
.form-group select,
.form-group textarea {
    padding: 1rem;
    border: 2px solid var(--gray-200);
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: white;
    color: var(--gray-800);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.form-group textarea {
    resize: vertical;
    min-height: 120px;
    font-family: inherit;
}

.contact-submit-btn {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    padding: 1.2rem 2rem;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    box-shadow: var(--shadow-lg);
}

.contact-submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(99, 102, 241, 0.4);
}

.contact-submit-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
}

.contact-methods {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.contact-method {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.contact-method:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.method-icon {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.method-info h5 {
    color: white;
    font-weight: 600;
    margin-bottom: 0.25rem;
    font-size: 1rem;
}

.method-info p {
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.method-info span {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85rem;
}

.office-locations {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.office-item {
    padding: 1.5rem;
    background: var(--gray-50);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.office-item:hover {
    background: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.office-item h5 {
    font-weight: 700;
    color: var(--gray-800);
    margin-bottom: 0.75rem;
    font-size: 1.1rem;
}

.office-item p {
    color: var(--gray-600);
    line-height: 1.6;
    font-size: 0.9rem;
}

.quick-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.quick-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: var(--gray-50);
    border-radius: 12px;
    text-decoration: none;
    color: var(--gray-700);
    font-weight: 500;
    transition: all 0.3s ease;
}

.quick-link:hover {
    background: white;
    color: var(--primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.quick-link i {
    color: var(--primary);
    width: 20px;
    text-align: center;
}

/* FAQ Styles */
.faq-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.faq-item {
    border: 2px solid var(--gray-100);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
}

.faq-item:hover {
    border-color: var(--primary);
}

.faq-question {
    padding: 1.5rem;
    background: var(--gray-50);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    user-select: none;
}

.faq-question:hover {
    background: var(--gray-100);
}

.faq-question.active {
    background: var(--primary);
    color: white;
}

.faq-question h4 {
    font-weight: 600;
    font-size: 1.1rem;
    margin: 0;
}

.faq-question i {
    transition: transform 0.3s ease;
    font-size: 0.9rem;
}

.faq-question.active i {
    transform: rotate(180deg);
}

.faq-answer {
    padding: 0 1.5rem;
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    background: white;
}

.faq-answer.active {
    padding: 1.5rem;
    max-height: 200px;
}

.faq-answer p {
    color: var(--gray-600);
    line-height: 1.6;
    margin: 0;
}

/* Form Error States */
.form-group input.error,
.form-group textarea.error,
.form-group select.error {
    border-color: var(--error);
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
    
    .contact-methods {
        gap: 1rem;
    }
    
    .contact-method {
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
    }
    
    .office-locations {
        gap: 1rem;
    }
    
    .office-item {
        padding: 1rem;
    }
}
</style>

<script>
// FAQ Toggle Functionality
function toggleFAQ(element) {
    const faqItem = element.parentElement;
    const answer = faqItem.querySelector('.faq-answer');
    const icon = element.querySelector('i');
    
    // Close other FAQs
    document.querySelectorAll('.faq-item').forEach(item => {
        if (item !== faqItem) {
            item.querySelector('.faq-question').classList.remove('active');
            item.querySelector('.faq-answer').classList.remove('active');
        }
    });
    
    // Toggle current FAQ
    element.classList.toggle('active');
    answer.classList.toggle('active');
}

// Form Submission Handling
document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = this;
    const submitBtn = document.getElementById('submitBtn');
    const spinner = submitBtn.querySelector('.loading-spinner');
    const buttonText = submitBtn.querySelector('span');
    const buttonIcon = submitBtn.querySelector('i:not(.fa-spinner)');
    
    // Validate form first
    if (!validateForm()) {
        showMessage('error', 'Please fill in all required fields correctly.');
        return;
    }
    
    // Show loading state
    submitBtn.disabled = true;
    spinner.style.display = 'inline-block';
    buttonIcon.style.display = 'none';
    buttonText.textContent = 'Sending...';
    
    // Get form data
    const formData = new FormData(form);
    
    // Submit form (regular form submission since we don't have AJAX endpoint)
    form.submit();
});

// Form Validation
function validateForm() {
    const form = document.getElementById('contactForm');
    const requiredFields = form.querySelectorAll('[required]');
    let isValid = true;
    
    requiredFields.forEach(field => {
        if (!validateField(field)) {
            isValid = false;
        }
    });
    
    return isValid;
}

function validateField(field) {
    const value = field.value.trim();
    
    // Remove existing error styling
    field.classList.remove('error');
    
    if (!value) {
        field.classList.add('error');
        return false;
    }
    
    // Email validation
    if (field.type === 'email' && value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) {
            field.classList.add('error');
            return false;
        }
    }
    
    return true;
}

// Real-time validation
document.querySelectorAll('#contactForm input, #contactForm textarea').forEach(field => {
    field.addEventListener('blur', function() {
        validateField(this);
    });
    
    field.addEventListener('input', function() {
        // Remove error styling when user starts typing
        if (this.classList.contains('error')) {
            this.classList.remove('error');
        }
    });
});

// Show message function (integrate with Django messages)
function showMessage(type, message) {
    // This function can be used for client-side validation messages
    // Django messages will handle server-side responses
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible`;
    alertDiv.innerHTML = `
        <div class="alert-content">
            <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'}"></i>
            <span>${message}</span>
        </div>
        <button type="button" class="alert-close" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    // Add to messages container or create one
    let container = document.querySelector('.messages-container');
    if (!container) {
        container = document.createElement('div');
        container.className = 'messages-container';
        container.style.cssText = `
            position: fixed;
            top: 100px;
            right: 2rem;
            z-index: 1050;
            max-width: 400px;
            width: 100%;
        `;
        document.body.appendChild(container);
    }
    
    container.appendChild(alertDiv);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.style.opacity = '0';
            alertDiv.style.transform = 'translateX(100%)';
            setTimeout(() => alertDiv.remove(), 300);
        }
    }, 5000);
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scrolling to FAQ items
    document.querySelectorAll('.faq-question').forEach(question => {
        question.addEventListener('click', function() {
            setTimeout(() => {
                this.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 150);
        });
    });
});
</script>
{% endblock %}